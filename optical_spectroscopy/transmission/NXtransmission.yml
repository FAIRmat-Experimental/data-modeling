# FAIRmat consortium 21.07.2022
# Draft NeXus application definition for transmission experiments

category: application
doc: Application definition for transmission experiments
symbols:
  doc: Variables used throughout the experiment
  N_wavelengths: Number of wavelength points
  N_parameters: Number of sample parameters scanned
  N_time: Number of time points scanned

(NXtransmission):
  (NXentry):
    doc: |
      This application definition
    definition:
      doc: "An application definition for transmission."
      \@version:
        doc: "Version number to identify which definition of this application
          definition was used for this entry/data."
      \@url:
        doc: "URL where to find further material (documentation, examples)
          relevant to the application definition."
      enumeration: [NXtransmission]
    start_time(NX_DATE_TIME):
      doc: "Start time of the experiment."
    instrument(NXinstrument):
      common_beam_mask(NXslit):
        doc: Common beam mask to shape the incident beam
        y_gap(NX_NUMBER):
          doc: "The height of the common beam in percentage of the beam"
          unit: NX_UNITLESS
      common_beam_depolarizer(NX_BOOLEAN):
        doc: |
          If true, the incident beam is depolarized.
      polarizer(NX_NUMBER):
        doc: Polarizer value inside the beam path
        unit: NX_ANGLE
      ref_attenuator(NXattenuator):
        doc: Attenuator in the reference beam
        attenuator_transmission(NX_FLOAT):
      sample_attenuator(NXattenuator):
        doc: Attenuator in the sample beam
        attenuator_transmission(NX_FLOAT):
      operator(NXuser):
        exists: [min, 1]
        doc: "Contact information of at least the user of the instrument or the
          investigator who performed this experiment.
          Adding multiple users if relevant is recommended."
        name:
          doc: "Name of the user."
        affiliation:
          doc:
            "Name of the affiliation of the user at the point in time when the
            experiment was performed."
        address:
          doc: "Street address of the user's affiliation."
        email:
          doc: "Email address of the user."
        orcid:
          exists: recommended
          doc: "Author ID defined by https://orcid.org/."
        telephone_number:
          exists: recommended
          doc: "Telephone number of the user."
      (NXmonochromator):
        wavelength_range(NX_NUMBER):
          doc: Wavelength range in which this monochromator was used
          dimensions:
            rank: 1
            dim: [[1, 2]]
          unit: NX_LENGTH
      (NXdetector):
        wavelength_range(NX_NUMBER):
          doc: Wavelength range in which this detector was used
          dimensions:
            rank: 1
            dim: [[1, 2]]
          unit: NX_LENGTH
        type(NX_CHAR):
          doc: Detector type
          enumeration: [Photomultiplier tube, PbS, InGaAs]
        response_time(NX_NUMBER):
          doc: Response time of the detector
          exists: optional
          unit: NX_TIME
        gain(NX_NUMER):
          doc: Detector gain
          exists: optional
        slit(NXslit):
          doc: Slit setting used for measurement with this detector
          type(NX_CHAR):
            enumeration: [fixed, servo]
      (NXsource):
        doc: The lamp used for illumination
        type(NX_CHAR):
          doc: "The type of lamp, e.g. halogen, D2 etc."
        spectrum(NX_NUMBER):
          doc: "The spectrum of the lamp used"
          exists: optional
          dimensions:
            rank: 1
            dim: [[1, N_wavelengths]]
        wavelength_range(NX_NUMBER):
          doc: Wavelength range in which the lamp was used
          dimensions:
            rank: 1
            dim: [[1, 2]]
          unit: NX_LENGTH
    (NXsample):
      doc: Properties of the sample measured
      name(NX_CHAR):
    data(NXdata):
      # ToDo: The actual maesurement data should be somewhere else.
      # This should only be here to point to plotable data
