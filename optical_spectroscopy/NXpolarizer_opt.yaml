# A draft of a new base class to describe an optical polarizer
# (NXpolarizer describes a spin polarizer)

category: base
symbols:
  N_spectrum: |
    Size of the wavelength array for which the refractive index of the material
    and/or coating is given.
  N_spectrum_RT: |
    Size of the wavelength array for which the reflectance or transmission of
    the polarizer is given.
    
doc: |
  An optical polarizer.

  Information on the properties of polarizer is provided e.g.
  [here](https://www.rp-photonics.com/polarizers.html).

(NXpolarizer_opt):
  doc: Specify the properties of a polarizer.
  type:
    exists: required
    doc: Type of the polarizer (e.g. dichroic, linear, circular etc.)
    enumeration:
      [
        "dichroic",
        "linear",
        "circular",
        "Glan-Thompson prism",
        "Nicol prism",
        "Glan-Taylor prism",
        "Glan-Focault prism",
        "Wollaston prism",
        "Normarski prism",
        "Senarmont prism", 
        "thin-film polarizer",
        "wire grid polarizer",
        "other"
      ]
    # ??? Any other common polarizer types ???
  type_other:
    doc: If you selected 'other' in type specify what it is.
  
  polarizer_angle(NX_NUMBER):
    exists: recommended
    doc: Angle of the polarizer.
    unit: NX_ANGLE
  
  acceptance_angle(NX_NUMBER):
    exists: recommended
    doc: Acceptance angle of the polarizer (range).
    unit: NX_ANGLE
    dimensions:
      rank: 1
      dim: [[1, 2]]
  
  (NXshape):
    exists: recommended
    doc: |
      Describe the geometry (shape, dimension etc.) of the device.
      Specify the dimensions in 'SHAPE/size'. A sketch of the device should be
      provided in the 'sketch(NXdata)' field to clarify (i) the shape and
      dimensions of the device, and (ii) the input and outputs (i.e. the
      direction of the incoming and outcoming (split) beams).
    # !!! NOTE: this class is the same as for NXbeam_path !!!
    shape:
      doc: Describe the shape (plate, cube, wedged, prism etc.).
      enumeration:
        [
          cube,
          cylinder,
          plate,
          prism,
          wedged,
          other
        ]
    other_shape:
      doc: If you chose 'other' in 'shape' describe what it is.
    sketch(NXdata):
      doc: |
        Sketch of thedevice showing its geometry. The paths of the
        incoming and outgoing beam should be illustrated and labelled (0 for
        the incoming beam, and 1, 2,..., N_outputs for the outputs).
    size:
      doc: |
        Physical extent of the device. The device might be made up of one or
        more objects (NX_objects). The meaning and location of the axes used
        will vary according to the value of the 'shape' variable. 'N_shapepar'
        defines how many parameters:

        * For 'cube' the parameters are (width, length).
        * For 'cylinder' the parameters are (diameter, length).
        * For 'plate' the parameters are (width, height, length).
        * For 'prism' the parameters are (width, height, length).
        * For 'wedged' the parameters are (width, height, shortest length).
          The wedge angle should be provided in 'SHAPE/wedge_angle'.
        * For 'other' the parameters may be (A, B, C, ...) with the labels
          defined in the sketch plotted in 'SHAPE/sketch'.
      dimensions:
        rank: 2
        dim:
          [
            [1, N_objects],
            [2, N_shapepar]
          ]
    wedge_angle(NX_FLOAT):
      doc: Wedge angle if 'shape' is 'wedged'.
      unit: NX_ANGLE

  wavelength_range(NX_FLOAT):
    exists: recommended
    doc: |
      Wavelength range for which the polarizer is designed. Enter the minimum
      and maximum wavelength (lower and upper limit) of the range.
    unit: NX_WAVELENGTH
    dimensions:
      rank: 1
      dim: [[1,2]]

  substrate(NXsample):
    doc: |
      Properties of the substrate material of the polarizer. If the device has
      a coating specify the coating material and its properties in 'coating'.
    substrate_material:
      doc: Specify the substrate material of the polarizer.
    substrate_thickness(NX_FLOAT):
      doc: Thickness of the polarizer substrate.
      unit: NX_LENGTH
    index_of_refraction(NX_FLOAT):
      doc: |
        Complex index of refraction of the polarizer material. Specify at given
        spectral values (wavelength, energy, wavenumber etc.).
      unit: NX_UNITLESS
      dimensions:
        rank: 2
        dim:
          [
            [1, 2],
            [2, N_spectrum]
          ]

  COATING(NXsample): 
  # Used captial letters for COATING so that more than one can be defined if
  # the device has different coatings on the front and back side.
    doc: |
      If the device has a coating describe the material and its properties.
      Some basic information can be found e.g. [here]
      (https://www.opto-e.com/basics/reflection-transmission-and-coatings).
      If the back and front side of the polarizer are coated with different
      materials, you may define two coatings (e.g. COATING1 and COATING2).
    coating_type:
      doc: |
        Specify the coating type (e.g. dielectric, anti-reflection (AR),
        multilayer coating etc.).
    coating_material:
      doc: Describe the coating material (e.g. MgF2).
    coating_thickness(NX_FLOAT):
      doc: Thickness of the coating.
      unit: NX_LENGTH
    index_of_refraction_coating(NX_FLOAT):
      doc: |
        Complex index of refraction of the coating. Specify at given spectral
        values (wavelength, energy, wavenumber etc.).
      unit: NX_UNITLESS
      dimensions:
        rank: 2
        dim:
          [
            [1, 2],
            [2, N_spectrum_coating]
          ]
  
  extinction_ratio(NX_FLOAT):
    doc: Extinction ratio (maximum to minimum transmission).
    unit: NX_UNITLESS 
    dimensions:
        rank: 1
        dim: 
          [
            [1, N_spectrum]
          ]

  reflection(NX_FLOAT):
    doc: Reflection of the polarizer at given wavelength values.
    unit: NX_UNITLESS
    dimensions:
      rank: 1
      dim: 
        [
          [1, N_spectrum_RT],
        ]
  
  transmission(NX_FLOAT):
    doc: Transmission of the polarizer at given wavelength values.
    unit: NX_UNITLESS
    dimensions:
      rank: 2
      dim:
        [
          [1, N_spectrum_RT],
        ]

  # anything missing?