category: base
doc: |
  Container for reporting a set of secondary electron images.
  
  Secondary electron images are one of the most important signal especially
  for scanning electron microscopy in materials science and engineering, for
  analyses of surface topography, getting an overview of the analysis region,
  or fractography.
symbols:
  n_images: Number of images.
  n_y: Number of pixels along the slow scan direction (often y).
  n_x: Number of pixels along the fast scan direction (often x).
(NXimage_set_em_se):
  # NEW ISSUE: (NXcg_polygon_set):
  (NXdata):
    doc: | 
      Collected secondary electron images (eventually as an image stack).
    intensity(NX_NUMBER):
      unit: NX_UNITLESS
      dimensions:
        rank: 3
        dim: [[1, n_p], [2, n_y], [3, n_x]]
      \@long_name:
        doc: Secondary electron image intensity
    # \@signal: intensity
    # \@axes: [image_id, ypos, xpos]
    # \@image_id_indices: 0
    # \@ypos_indices: 1
    # \@xpos_indices: 2
    image_id(NX_NUMBER):
      unit: NX_UNITLESS
      dimensions:
        rank: 1
        dim: [[1, n_p]]
      \@long_name:
        doc: Image identifier
    ypos(NX_NUMBER):
      unit: NX_LENGTH
      dimensions:
        rank: 1
        dim: [[1, n_y]]
      \@long_name:
        doc: Label for the y axis
    xpos(NX_NUMBER):
      unit: NX_LENGTH
      dimensions:
        rank: 1
        dim: [[1, n_x]]
      \@long_name:
        doc: Label for the x axis
  roi(NX_NUMBER):
    doc: |
      Physical dimensions of the region-of-interest on 
      the specimen surface which the image covers.
      The first and second number are the coordinates for the 
      minimum edge, the third and fourth number are the coordinates
      for the maximum edge of the rectangular ROI.
    unit: NX_LENGTH
    dimensions:
      rank: 2
      dim: [[1, n_images], [2, 4]]
  dwell_time(NX_FLOAT):
    unit: NX_TIME
  number_of_frames_averaged(NX_UINT):
    doc: How many frames were averaged to obtain the image.
    unit: NX_UNITLESS
    dimensions:
      rank: 1
      dim: [[1, n_images]]
  bias_voltage(NX_FLOAT):
    doc: |
      Bias voltage applied to the e.g. Faraday cage in front of the
      SE detector to attract or repell secondary electrons below
      a specific kinetic energy.
  # NEW ISSUE stage position: x, y, z, tilt, rot
  # type of detector
  # energy spectrum
  # location of the se detector
  # direction dependence
  # magnification relevant for leakage of SE and BSE
  # bse in-lens quadrat detector collection angles
  (NXoptical_system_em):
    exists: optional
    doc: |
      Container to store relevant settings affecting beam path,
      magnification, and working_distance
  scan_rotation(NXprocess):
    doc: |
      Scan rotation is an option offer by most control software.
  tilt_correction(NXprocess):
    doc: |
      Tilt correction is an option offered by most control software of SEMs
      to apply an on-the-fly processing of the image to correct for
      the excursion of objects when characterized with SE images
      on samples whose surface normal is tilted about an axis perpendicular
      to the optical axis.
    active(NX_BOOLEAN):
      doc: Was the option switched active or not.
  dynamic_focus(NXprocess):
    doc: |
      Dynamic focus is an option offered by most control software of SEMs
      to keep the image also focused when probing locations on the specimens
      beyond those for which the lens system was calibrated.
    active(NX_BOOLEAN):
      doc: Was the option switched active or not.
  # NEW ISSUE: drift correction
  # NEW ISSUE eventually store the settings of the dynamic focus
  # as to guide users to quicker find relevant settings with a specific SEM
  # NEW ISSUE stereo microscopy
  # NEW ISSUE calibrations
  # NEW ISSUE contrast transfer function, 
  #     i.e. how many photons/electron translate into how many counts
  # NEW ISSUE: final_aperture
  
