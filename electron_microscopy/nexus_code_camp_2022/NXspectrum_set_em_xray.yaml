category: base
doc: |
  Container for reporting a set of energy-dispersive X-ray spectra.
  
  Virtually the most important case is that spectra are collected in 
  a scanning microscope (SEM or STEM) for a collection of points.
  The majority of cases use simple d-dimensional regular scan pattern,
  such as line profiles or surface mappings.
  Surface mappings are the most frequently used ones.
  
  Often such sets of scan points will be measured with the same settings,
  i.e. the same binning, energy resolution.
symbols:
  n_p: Number of scan points
  n_photon_energy: Number of X-ray photon energy (bins)
  n_y: Number of pixel per Kikuchi pattern in the slow direction
  n_x: Number of pixel per Kikuchi pattern in the fast direction
  n_elements: Number of identified elements
(NXspectrum_set_em_xray):
  (NXdata):
    doc: | 
      Collected X-ray counts.
    counts(NX_UINT):
      unit: NX_UNITLESS
      dimensions:
        rank: 2
        dim: [[1, n_p], [2, n_photon_energy]]
  # method 2, surface case shown, line profile simplifies trivially
  (NXdata):
    doc: | 
      Collected X-ray counts.
    counts(NX_UINT):
      unit: NX_UNITLESS
      dimensions:
        rank: 3
        dim: [[1, n_y], [2, n_x], [3, n_photon_energy]]
      \@long_name:
        doc: X-ray photon counts
    # \@signal: counts
    # \@axes: [ypos, xpos, photon_energy]
    # \@ypos_indices: 0
    # \@xpos_indices: 1
    # \@photon_energy_indices: 2
    ypos(NX_NUMBER):
      unit: NX_LENGTH
      dimensions:
        rank: 1
        dim: [[1, n_y]]
      \@long_name:
        doc: Label for the y axis
    xpos(NX_NUMBER):
      unit: NX_LENGTH
      dimensions:
        rank: 1
        dim: [[1, n_x]]
      \@long_name:
        doc: Label for the x axis
    photon_energy(NX_NUMBER):
      unit: NX_ENERGY
      dimensions:
        rank: 1
        dim: [[1, n_photon_energy]]
      \@long_name:
        doc: X-ray energy
  indexing(NXprocess):
    doc: |
      Details about computational steps how peaks were indexed as elements.
    program:
      doc: |
        Given name of the program that was used to perform this computation.
      \@version:
        doc: |
          Program version plus build number, commit hash, or description of an ever persistent resource
          where the source code of the program and build instructions can be found so that the program
          can be configured in such a manner that the result file is ideally recreatable yielding the
          same results.
    (NXpeak):
      doc: |
        Name and location of each X-ray line which was indexed as a known ion.
    element_names(NX_CHAR):
      doc: List of the names of identified elements.
      dimensions:
        rank: 1
        dim: [[1, n_elements]]
  edx_maps(NXprocess):
    doc: |
      Individual element-specific EDX/EDS/EDXS/SXES mapping
    program:
      doc: |
        Given name of the program that was used to perform this computation.
      \@version:
        doc: |
          Program version plus build number, commit hash, or description of an ever persistent resource
          where the source code of the program and build instructions can be found so that the program
          can be configured in such a manner that the result file is ideally recreatable yielding the
          same results.
    (NXdata):
      doc: |
        Individual element-specific maps. Individual maps should
        each be a group and be named according to element_names
    # NEW ISSUE:
